"use strict";(globalThis.webpackChunkcoo_llm_docs=globalThis.webpackChunkcoo_llm_docs||[]).push([[6956],{1520:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Administrator-Guide/Client-Management","title":"Client Management","description":"Guide to managing API clients, authentication, and access control in COO-LLM.","source":"@site/content/Administrator-Guide/Client-Management.md","sourceDirName":"Administrator-Guide","slug":"/Administrator-Guide/Client-Management","permalink":"/docs/docs/Administrator-Guide/Client-Management","draft":false,"unlisted":false,"editUrl":"https://github.com/coo-llm/coo-llm-main/tree/main/docs/content/content/Administrator-Guide/Client-Management.md","tags":[{"inline":true,"label":"administrator-guide","permalink":"/docs/docs/tags/administrator-guide"},{"inline":true,"label":"client-management","permalink":"/docs/docs/tags/client-management"}],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"tags":["administrator-guide","client-management"]}}');var s=i(4848),r=i(8453);const l={sidebar_position:3,tags:["administrator-guide","client-management"]},a="Client Management",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Client Architecture",id:"client-architecture",level:2},{value:"Client Data Model",id:"client-data-model",level:3},{value:"Storage Backends",id:"storage-backends",level:3},{value:"Managing Clients",id:"managing-clients",level:2},{value:"Creating Clients",id:"creating-clients",level:3},{value:"Listing Clients",id:"listing-clients",level:3},{value:"Updating Clients",id:"updating-clients",level:3},{value:"Deleting Clients",id:"deleting-clients",level:3},{value:"Client Authentication",id:"client-authentication",level:2},{value:"API Key Validation",id:"api-key-validation",level:3},{value:"Provider Restrictions",id:"provider-restrictions",level:3},{value:"Monitoring Client Usage",id:"monitoring-client-usage",level:2},{value:"Client Metrics API",id:"client-metrics-api",level:3},{value:"Cost Tracking",id:"cost-tracking",level:3},{value:"Usage Alerts",id:"usage-alerts",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"API Key Management",id:"api-key-management",level:3},{value:"Access Control",id:"access-control",level:3},{value:"Monitoring",id:"monitoring",level:3},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Development Setup",id:"development-setup",level:3},{value:"Production Setup",id:"production-setup",level:3},{value:"Multi-Tenant Setup",id:"multi-tenant-setup",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Client Authentication Fails",id:"client-authentication-fails",level:4},{value:"Provider Access Denied",id:"provider-access-denied",level:4},{value:"Metrics Not Showing",id:"metrics-not-showing",level:4},{value:"Debug Commands",id:"debug-commands",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Programmatic Client Management",id:"programmatic-client-management",level:3},{value:"Terraform Integration",id:"terraform-integration",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"client-management",children:"Client Management"})}),"\n",(0,s.jsx)(n.p,{children:"Guide to managing API clients, authentication, and access control in COO-LLM."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"COO-LLM supports multi-tenant client management with:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dynamic client registration"}),": Create and manage API clients programmatically"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Provider restrictions"}),": Limit clients to specific LLM providers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Usage tracking"}),": Monitor per-client metrics and costs"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Access control"}),": Fine-grained permissions and restrictions"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"client-architecture",children:"Client Architecture"}),"\n",(0,s.jsx)(n.h3,{id:"client-data-model",children:"Client Data Model"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'type ClientInfo struct {\n    ID               string   `json:"id"`\n    APIKey           string   `json:"api_key"`\n    Description      string   `json:"description"`\n    AllowedProviders []string `json:"allowed_providers"`\n    CreatedAt        int64    `json:"created_at"`\n    LastUsed         int64    `json:"last_used"`\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"storage-backends",children:"Storage Backends"}),"\n",(0,s.jsx)(n.p,{children:"Clients can be stored in:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Memory"}),": For development and testing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Redis"}),": For distributed deployments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Database"}),": PostgreSQL, MySQL, MongoDB"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"File"}),": JSON/YAML configuration files"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"managing-clients",children:"Managing Clients"}),"\n",(0,s.jsx)(n.h3,{id:"creating-clients",children:"Creating Clients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Create a new client via Admin API\ncurl -X POST http://localhost:2906/admin/v1/clients \\\n  -H "Authorization: Bearer your-admin-key" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "client_id": "prod-app-001",\n    "api_key": "sk-prod-app-key-123",\n    "description": "Production mobile application",\n    "allowed_providers": ["openai", "anthropic"]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"listing-clients",children:"Listing Clients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# List all clients\ncurl -H "Authorization: Bearer your-admin-key" \\\n  http://localhost:2906/admin/v1/clients/list\n'})}),"\n",(0,s.jsx)(n.h3,{id:"updating-clients",children:"Updating Clients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Update client configuration\ncurl -X PUT http://localhost:2906/admin/v1/clients/prod-app-001 \\\n  -H "Authorization: Bearer your-admin-key" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "description": "Updated production mobile app",\n    "allowed_providers": ["openai", "anthropic", "gemini"]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"deleting-clients",children:"Deleting Clients"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Remove a client\ncurl -X DELETE http://localhost:2906/admin/v1/clients/prod-app-001 \\\n  -H "Authorization: Bearer your-admin-key"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"client-authentication",children:"Client Authentication"}),"\n",(0,s.jsx)(n.h3,{id:"api-key-validation",children:"API Key Validation"}),"\n",(0,s.jsx)(n.p,{children:"Clients authenticate using API keys:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Client makes request with API key\ncurl http://localhost:2906/v1/chat/completions \\\n  -H "Authorization: Bearer sk-prod-app-key-123" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "gpt-4",\n    "messages": [{"role": "user", "content": "Hello"}]\n  }\'\n'})}),"\n",(0,s.jsx)(n.h3,{id:"provider-restrictions",children:"Provider Restrictions"}),"\n",(0,s.jsx)(n.p,{children:"Clients are restricted to allowed providers:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "client_id": "restricted-client",\n  "allowed_providers": ["openai", "anthropic"],\n  "description": "Client limited to OpenAI and Anthropic"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Requests to allowed providers succeed"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Requests to disallowed providers return 403 Forbidden"}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.code,{children:'["*"]'})," allows all providers (wildcard)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"monitoring-client-usage",children:"Monitoring Client Usage"}),"\n",(0,s.jsx)(n.h3,{id:"client-metrics-api",children:"Client Metrics API"}),"\n",(0,s.jsx)(n.p,{children:"Get detailed usage statistics per client:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Get client metrics for last 24 hours\ncurl -H "Authorization: Bearer your-admin-key" \\\n  "http://localhost:2906/admin/v1/metrics/clients/prod-app-001?start=$(date -d \'24 hours ago\' +%s)&end=$(date +%s)"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Response:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "client_id": "prod-app-001",\n  "total_requests": 1250,\n  "total_tokens": 45000,\n  "total_cost": 22.50,\n  "success_rate": 0.987,\n  "avg_latency": 145.2,\n  "last_request_time": 1700001000\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"cost-tracking",children:"Cost Tracking"}),"\n",(0,s.jsx)(n.p,{children:"Monitor client spending:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Get cost breakdown by provider for a client\ncurl -H "Authorization: Bearer your-admin-key" \\\n  "http://localhost:2906/admin/v1/stats?group_by=provider&client_key=prod-app-001"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"usage-alerts",children:"Usage Alerts"}),"\n",(0,s.jsx)(n.p,{children:"Set up alerts for client behavior:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# Prometheus alert rules for clients\ngroups:\n  - name: client-usage\n    rules:\n      - alert: HighClientCost\n        expr: rate(coo_llm_client_cost_total{client_id="prod-app-001"}[1h]) > 10\n        for: 15m\n        labels:\n          severity: warning\n        annotations:\n          summary: "Client prod-app-001 exceeding cost threshold"\n\n      - alert: ClientErrorSpike\n        expr: rate(coo_llm_client_errors_total{client_id="prod-app-001"}[5m]) / rate(coo_llm_client_requests_total{client_id="prod-app-001"}[5m]) > 0.1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "High error rate for client prod-app-001"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"api-key-management",children:"API Key Management"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rotate keys regularly"}),": Change API keys every 90 days"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use strong keys"}),": Generate cryptographically secure API keys"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Monitor usage"}),": Alert on unusual access patterns"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Revoke compromised keys"}),": Immediately disable suspicious keys"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"access-control",children:"Access Control"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Principle of least privilege"}),": Only allow necessary providers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Regular audits"}),": Review client permissions quarterly"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Environment separation"}),": Different keys for dev/staging/prod"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rate limiting"}),": Apply per-client rate limits"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Log all access"}),": Track every API call with client context"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Alert on anomalies"}),": Unusual request patterns or volumes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cost monitoring"}),": Set budgets and alerts per client"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance tracking"}),": Monitor latency and success rates"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,s.jsx)(n.h3,{id:"development-setup",children:"Development Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# config.yaml - Development\napi_keys:\n  - key: "dev-key-123"\n    allowed_providers: ["*"]  # Allow all providers for development\n\n# Or use dynamic client management\n# Clients created via Admin API will be stored in configured backend\n'})}),"\n",(0,s.jsx)(n.h3,{id:"production-setup",children:"Production Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# config.yaml - Production\nstorage:\n  runtime:\n    type: "redis"\n    addr: "redis-cluster:6379"\n\n# Clients managed dynamically via Admin API\n# No static API keys in config for better security\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multi-tenant-setup",children:"Multi-Tenant Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# config.yaml - Multi-tenant\nstorage:\n  runtime:\n    type: "postgres"\n    dsn: "postgres://user:pass@db:5432/coo_llm"\n\n# All clients managed through Admin API\n# Each tenant gets isolated client credentials\n'})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsx)(n.h4,{id:"client-authentication-fails",children:"Client Authentication Fails"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"401 Unauthorized responses"}),"\n",(0,s.jsx)(n.li,{children:'"Invalid API key" errors'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Verify API key is correct and active"}),"\n",(0,s.jsx)(n.li,{children:"Check key hasn't expired"}),"\n",(0,s.jsx)(n.li,{children:"Ensure key is URL-encoded if needed"}),"\n",(0,s.jsx)(n.li,{children:"Confirm client exists in storage"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"provider-access-denied",children:"Provider Access Denied"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"403 Forbidden responses"}),"\n",(0,s.jsx)(n.li,{children:'"Provider not allowed" errors'}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Check client's ",(0,s.jsx)(n.code,{children:"allowed_providers"})," list"]}),"\n",(0,s.jsx)(n.li,{children:"Update client permissions via Admin API"}),"\n",(0,s.jsx)(n.li,{children:"Verify provider name spelling"}),"\n",(0,s.jsx)(n.li,{children:"Confirm provider is configured in system"}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"metrics-not-showing",children:"Metrics Not Showing"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Empty metrics responses"}),"\n",(0,s.jsx)(n.li,{children:"Missing client data"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Verify storage backend is configured"}),"\n",(0,s.jsx)(n.li,{children:"Check storage connectivity"}),"\n",(0,s.jsx)(n.li,{children:"Confirm metrics collection is enabled"}),"\n",(0,s.jsx)(n.li,{children:"Validate time range parameters"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"debug-commands",children:"Debug Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check client exists\ncurl -H "Authorization: Bearer admin-key" \\\n  http://localhost:2906/admin/v1/clients/debug-client\n\n# Test client authentication\ncurl -H "Authorization: Bearer client-key" \\\n  http://localhost:2906/v1/models\n\n# Check client metrics\ncurl -H "Authorization: Bearer admin-key" \\\n  "http://localhost:2906/admin/v1/metrics/clients/debug-client?start=$(date +%s)"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,s.jsx)(n.h3,{id:"programmatic-client-management",children:"Programmatic Client Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import requests\n\nADMIN_KEY = "your-admin-key"\nBASE_URL = "http://localhost:2906"\n\ndef create_client(client_id, api_key, description, providers):\n    response = requests.post(\n        f"{BASE_URL}/admin/v1/clients",\n        headers={\n            "Authorization": f"Bearer {ADMIN_KEY}",\n            "Content-Type": "application/json"\n        },\n        json={\n            "client_id": client_id,\n            "api_key": api_key,\n            "description": description,\n            "allowed_providers": providers\n        }\n    )\n    return response.json()\n\ndef get_client_metrics(client_id, hours=24):\n    start = int(time.time()) - (hours * 3600)\n    end = int(time.time())\n\n    response = requests.get(\n        f"{BASE_URL}/admin/v1/metrics/clients/{client_id}",\n        headers={"Authorization": f"Bearer {ADMIN_KEY}"},\n        params={"start": start, "end": end}\n    )\n    return response.json()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"terraform-integration",children:"Terraform Integration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'resource "http_request" "coo_llm_client" {\n  url    = "http://coo-llm:2906/admin/v1/clients"\n  method = "POST"\n\n  headers = {\n    Authorization = "Bearer ${var.admin_key}"\n    Content-Type  = "application/json"\n  }\n\n  body = jsonencode({\n    client_id         = "terraform-client"\n    api_key           = random_password.api_key.result\n    description       = "Managed by Terraform"\n    allowed_providers = ["openai", "anthropic"]\n  })\n}\n\nresource "random_password" "api_key" {\n  length  = 32\n  special = false\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(6540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);