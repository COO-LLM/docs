"use strict";(globalThis.webpackChunkcoo_llm_docs=globalThis.webpackChunkcoo_llm_docs||[]).push([[7126],{8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}},8706:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Administrator-Guide/Monitoring","title":"Monitoring & Metrics","description":"Guide to monitoring and tracking COO-LLM in production.","source":"@site/content/Administrator-Guide/Monitoring.md","sourceDirName":"Administrator-Guide","slug":"/Administrator-Guide/Monitoring","permalink":"/docs/docs/Administrator-Guide/Monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/coo-llm/coo-llm-main/tree/main/docs/content/content/Administrator-Guide/Monitoring.md","tags":[{"inline":true,"label":"administrator-guide","permalink":"/docs/docs/tags/administrator-guide"},{"inline":true,"label":"monitoring","permalink":"/docs/docs/tags/monitoring"}],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"tags":["administrator-guide","monitoring"]},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/docs/docs/Guides/Configuration"},"next":{"title":"Troubleshooting","permalink":"/docs/docs/Administrator-Guide/Troubleshooting"}}');var r=i(4848),s=i(8453);const l={sidebar_position:2,tags:["administrator-guide","monitoring"]},o="Monitoring & Metrics",a={},c=[{value:"Metrics Overview",id:"metrics-overview",level:2},{value:"Client Management",id:"client-management",level:2},{value:"Monitoring Client Usage",id:"monitoring-client-usage",level:3},{value:"Client Health Dashboard",id:"client-health-dashboard",level:3},{value:"Enhanced Metrics API",id:"enhanced-metrics-api",level:2},{value:"Client-Specific Metrics",id:"client-specific-metrics",level:3},{value:"Provider Performance Metrics",id:"provider-performance-metrics",level:3},{value:"Global System Metrics",id:"global-system-metrics",level:3},{value:"Security Monitoring",id:"security-monitoring",level:2},{value:"Admin API Audit Logs",id:"admin-api-audit-logs",level:3},{value:"Rate Limiting Metrics",id:"rate-limiting-metrics",level:3},{value:"Authentication Monitoring",id:"authentication-monitoring",level:3},{value:"Prometheus Integration",id:"prometheus-integration",level:2},{value:"Prometheus Configuration",id:"prometheus-configuration",level:3},{value:"Metrics Available",id:"metrics-available",level:3},{value:"Query Examples",id:"query-examples",level:3},{value:"Grafana Dashboards",id:"grafana-dashboards",level:2},{value:"Dashboard Architecture",id:"dashboard-architecture",level:3},{value:"Sample Dashboard JSON",id:"sample-dashboard-json",level:3},{value:"Admin API Monitoring",id:"admin-api-monitoring",level:2},{value:"Get Current Metrics",id:"get-current-metrics",level:3},{value:"Response Format",id:"response-format",level:3},{value:"Logging",id:"logging",level:2},{value:"File Logging",id:"file-logging",level:3},{value:"Log Levels",id:"log-levels",level:3},{value:"Structured Logging",id:"structured-logging",level:3},{value:"Health Checks",id:"health-checks",level:2},{value:"Basic Health Check",id:"basic-health-check",level:3},{value:"Detailed Health Check",id:"detailed-health-check",level:3},{value:"Alerting",id:"alerting",level:2},{value:"Recommended Alerts",id:"recommended-alerts",level:3},{value:"Storage Backends",id:"storage-backends",level:2},{value:"InfluxDB for Time-Series Metrics",id:"influxdb-for-time-series-metrics",level:3},{value:"Redis for Caching",id:"redis-for-caching",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"monitoring--metrics",children:"Monitoring & Metrics"})}),"\n",(0,r.jsx)(n.p,{children:"Guide to monitoring and tracking COO-LLM in production."}),"\n",(0,r.jsx)(n.h2,{id:"metrics-overview",children:"Metrics Overview"}),"\n",(0,r.jsx)(n.p,{children:"COO-LLM collects detailed metrics about:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request latency"}),": Request processing time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Token usage"}),": Number of tokens consumed per provider/key"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error rates"}),": Error rate per provider"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rate limiting"}),": Requests rejected due to rate limits"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Client metrics"}),": Per-client usage, costs, and performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Provider metrics"}),": Detailed provider-specific analytics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Global metrics"}),": System-wide aggregated statistics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security events"}),": Admin API access, authentication attempts"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"client-management",children:"Client Management"}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-client-usage",children:"Monitoring Client Usage"}),"\n",(0,r.jsx)(n.p,{children:"Track API client behavior and usage patterns:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get client metrics via Admin API\ncurl -H "Authorization: Bearer admin-key" \\\n  http://localhost:2906/admin/v1/metrics/clients/client-123\n\n# Response includes:\n# - Total requests and tokens used\n# - Cost breakdown by provider\n# - Success rate and average latency\n# - Last activity timestamp\n'})}),"\n",(0,r.jsx)(n.h3,{id:"client-health-dashboard",children:"Client Health Dashboard"}),"\n",(0,r.jsx)(n.p,{children:"Monitor client health and detect anomalies:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Usage spikes"}),": Sudden increases in request volume"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error rate increases"}),": Client-specific error patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost overruns"}),": Budget monitoring per client"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Provider distribution"}),": How clients use different providers"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"enhanced-metrics-api",children:"Enhanced Metrics API"}),"\n",(0,r.jsx)(n.h3,{id:"client-specific-metrics",children:"Client-Specific Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get detailed client metrics\nGET /admin/v1/metrics/clients/{client_id}?start=1700000000&end=1700003600\n\n# Response:\n{\n  "client_id": "client-123",\n  "total_requests": 1000,\n  "total_tokens": 50000,\n  "total_cost": 25.50,\n  "success_rate": 0.98,\n  "avg_latency": 150.5,\n  "last_request_time": 1700001000\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"provider-performance-metrics",children:"Provider Performance Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get provider-specific analytics\nGET /admin/v1/metrics/providers/openai?start=1700000000&end=1700003600\n\n# Response:\n{\n  "provider_id": "openai",\n  "total_requests": 500,\n  "total_tokens": 25000,\n  "total_cost": 12.50,\n  "success_rate": 0.99,\n  "avg_latency": 120.3,\n  "error_count": 5\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"global-system-metrics",children:"Global System Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get system-wide statistics\nGET /admin/v1/metrics/global?start=1700000000&end=1700003600\n\n# Response:\n{\n  "total_clients": 5,\n  "total_providers": 3,\n  "total_requests": 2500,\n  "total_tokens": 125000,\n  "total_cost": 62.50,\n  "overall_success_rate": 0.97,\n  "avg_latency": 135.2\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"security-monitoring",children:"Security Monitoring"}),"\n",(0,r.jsx)(n.h3,{id:"admin-api-audit-logs",children:"Admin API Audit Logs"}),"\n",(0,r.jsx)(n.p,{children:"All admin operations are logged for security auditing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"[AUDIT] POST /admin/v1/clients from 192.168.1.100\n[AUDIT] GET /admin/v1/metrics/global completed in 45ms\n[AUDIT] DELETE /admin/v1/clients/client-123 from 10.0.0.50\n"})}),"\n",(0,r.jsx)(n.h3,{id:"rate-limiting-metrics",children:"Rate Limiting Metrics"}),"\n",(0,r.jsx)(n.p,{children:"Monitor admin API usage and rate limit hits:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-promql",children:"# Admin API request rate\nrate(coo_llm_admin_requests_total[5m])\n\n# Rate limit hits\nrate(coo_llm_admin_rate_limits_total[5m])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"authentication-monitoring",children:"Authentication Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Track authentication attempts and failures:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Successful logins"}),": Web UI authentication"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Failed attempts"}),": Invalid credentials, expired tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rate limit hits"}),": Brute force protection"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Token usage"}),": JWT token validation"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prometheus-integration",children:"Prometheus Integration"}),"\n",(0,r.jsx)(n.h3,{id:"prometheus-configuration",children:"Prometheus Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# prometheus.yml\nscrape_configs:\n  - job_name: 'coo-llm'\n    static_configs:\n      - targets: ['localhost:2906']\n    metrics_path: '/metrics'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"metrics-available",children:"Metrics Available"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Metric"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_requests_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Total requests by provider, model, key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_tokens_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Total tokens used by provider, key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_cost_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Total API costs by provider, key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_latency_seconds"})}),(0,r.jsx)(n.td,{children:"Histogram"}),(0,r.jsx)(n.td,{children:"Request latency distribution"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_errors_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Total errors by type, provider"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_rate_limits_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Rate limit hits by key"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_admin_requests_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Admin API requests by endpoint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_admin_rate_limits_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Admin API rate limit hits"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_client_requests_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Requests by client ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_client_tokens_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Token usage by client ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"coo_llm_client_cost_total"})}),(0,r.jsx)(n.td,{children:"Counter"}),(0,r.jsx)(n.td,{children:"Cost by client ID"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"query-examples",children:"Query Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-promql",children:"# Request rate per provider\nrate(coo_llm_requests_total[5m])\n\n# Error rate\nrate(coo_llm_errors_total[5m]) / rate(coo_llm_requests_total[5m])\n\n# P95 latency\nhistogram_quantile(0.95, rate(coo_llm_latency_seconds_bucket[5m]))\n\n# Token usage per key\nrate(coo_llm_tokens_total[1h])\n\n# Cost tracking\nsum(rate(coo_llm_cost_total[1h])) by (provider)\n\n# Client usage patterns\ntopk(10, rate(coo_llm_client_requests_total[1h]))\n\n# Admin API monitoring\nrate(coo_llm_admin_requests_total[5m])\n"})}),"\n",(0,r.jsx)(n.h2,{id:"grafana-dashboards",children:"Grafana Dashboards"}),"\n",(0,r.jsx)(n.h3,{id:"dashboard-architecture",children:"Dashboard Architecture"}),"\n",(0,r.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Data Sources"\n        PROM[Prometheus<br/>Metrics DB]\n        LOKI[Loki<br/>Log Aggregation]\n        POSTGRES[(PostgreSQL<br/>Business Metrics)]\n    end\n\n    subgraph "Grafana Dashboard"\n        OVERVIEW[Overview Panel<br/>System Health]\n        PERFORMANCE[Performance Panel<br/>Latency & Throughput]\n        ERRORS[Errors Panel<br/>Error Rates & Types]\n        COSTS[Cost Panel<br/>API Usage Costs]\n        PROVIDERS[Providers Panel<br/>Per-Provider Metrics]\n        CLIENTS[Clients Panel<br/>Per-Client Usage]\n        SECURITY[Security Panel<br/>Admin API & Auth]\n    end\n\n    subgraph "Alerting"\n        ALERTS[Alert Rules<br/>Threshold-based]\n        NOTIF[Notifications<br/>Email/Slack/PagerDuty]\n    end\n\n    PROM --\x3e OVERVIEW\n    PROM --\x3e PERFORMANCE\n    PROM --\x3e ERRORS\n    PROM --\x3e COSTS\n    PROM --\x3e PROVIDERS\n    PROM --\x3e CLIENTS\n    PROM --\x3e SECURITY\n\n    LOKI --\x3e ERRORS\n    POSTGRES --\x3e COSTS\n    POSTGRES --\x3e CLIENTS\n\n    PERFORMANCE --\x3e ALERTS\n    ERRORS --\x3e ALERTS\n    ALERTS --\x3e NOTIF\n\n    style OVERVIEW fill:#7ed321,stroke:#417505,stroke-width:2px,color:#ffffff\n    style PERFORMANCE fill:#4a90e2,stroke:#2171b5,stroke-width:2px,color:#ffffff\n    style ERRORS fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#ffffff\n    style COSTS fill:#f5a623,stroke:#f39c12,stroke-width:2px,color:#ffffff\n    style PROVIDERS fill:#bd10e0,stroke:#9b59b6,stroke-width:2px,color:#ffffff\n    style CLIENTS fill:#50e3c2,stroke:#16a085,stroke-width:2px,color:#ffffff\n    style SECURITY fill:#9c27b0,stroke:#7b1fa2,stroke-width:2px,color:#ffffff\n    style ALERTS fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#ffffff\n    style NOTIF fill:#e74c3c,stroke:#c0392b,stroke-width:2px,color:#ffffff'}),"\n",(0,r.jsx)(n.h3,{id:"sample-dashboard-json",children:"Sample Dashboard JSON"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "dashboard": {\n    "title": "COO-LLM Production Dashboard",\n    "panels": [\n      {\n        "title": "System Overview",\n        "type": "stat",\n        "targets": [{\n          "expr": "up{job=\'coo-llm\'}",\n          "legendFormat": "Instances Up"\n        }]\n      },\n      {\n        "title": "Request Rate by Provider",\n        "type": "bargauge",\n        "targets": [{\n          "expr": "rate(coo_llm_requests_total[5m])",\n          "legendFormat": "{{provider}}"\n        }]\n      },\n      {\n        "title": "Error Rate Trend",\n        "type": "graph",\n        "targets": [{\n          "expr": "rate(coo_llm_errors_total[5m]) / rate(coo_llm_requests_total[5m]) * 100",\n          "legendFormat": "{{provider}} error %"\n        }]\n      },\n      {\n        "title": "Latency Distribution",\n        "type": "heatmap",\n        "targets": [{\n          "expr": "rate(coo_llm_latency_seconds_bucket[5m])",\n          "legendFormat": "{{le}}"\n        }]\n      },\n      {\n        "title": "Cost Tracking",\n        "type": "table",\n        "targets": [{\n          "expr": "sum(rate(coo_llm_tokens_total[1h])) by (provider) * $TOKEN_COSTS",\n          "legendFormat": "{{provider}}"\n        }]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"admin-api-monitoring",children:"Admin API Monitoring"}),"\n",(0,r.jsx)(n.h3,{id:"get-current-metrics",children:"Get Current Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer your-admin-key" \\\n  http://localhost:2906/admin/v1/metrics?start=1700000000&end=1700003600\n'})}),"\n",(0,r.jsx)(n.h3,{id:"response-format",children:"Response Format"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "latency": {\n    "points": [\n      {"timestamp": 1700000100, "value": 150.5},\n      {"timestamp": 1700000200, "value": 120.2}\n    ]\n  },\n  "tokens": {\n    "points": [\n      {"timestamp": 1700000100, "value": 1000},\n      {"timestamp": 1700000200, "value": 1200}\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,r.jsx)(n.h3,{id:"file-logging",children:"File Logging"}),"\n",(0,r.jsx)(n.p,{children:"COO-LLM logs to file with configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'logging:\n  file:\n    enabled: true\n    path: "/var/log/coo-llm/app.log"\n    max_size_mb: 100\n    max_backups: 5\n'})}),"\n",(0,r.jsx)(n.h3,{id:"log-levels",children:"Log Levels"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INFO"}),": Normal operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WARN"}),": Non-critical issues"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ERROR"}),": Failures requiring attention"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DEBUG"}),": Detailed debugging (development only)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"structured-logging",children:"Structured Logging"}),"\n",(0,r.jsx)(n.p,{children:"Logs include structured fields:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"request_id"}),": Unique request identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"provider"}),": LLM provider used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"model"}),": Model name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"latency_ms"}),": Response time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tokens_used"}),": Token count"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"client_key"}),": API key (hashed)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,r.jsx)(n.h3,{id:"basic-health-check",children:"Basic Health Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:2906/health\n# Response: {"status": "ok"}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"detailed-health-check",children:"Detailed Health Check"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -H "Authorization: Bearer admin-key" \\\n  http://localhost:2906/admin/v1/health\n'})}),"\n",(0,r.jsx)(n.p,{children:"Checks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Database connectivity"}),"\n",(0,r.jsx)(n.li,{children:"Provider API reachability"}),"\n",(0,r.jsx)(n.li,{children:"Memory usage"}),"\n",(0,r.jsx)(n.li,{children:"Goroutine count"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"alerting",children:"Alerting"}),"\n",(0,r.jsx)(n.h3,{id:"recommended-alerts",children:"Recommended Alerts"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# Prometheus Alert Rules\ngroups:\n  - name: coo-llm\n    rules:\n      - alert: HighErrorRate\n        expr: rate(coo_llm_errors_total[5m]) / rate(coo_llm_requests_total[5m]) > 0.1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "High error rate detected"\n\n      - alert: HighLatency\n        expr: histogram_quantile(0.95, rate(coo_llm_latency_seconds_bucket[5m])) > 10\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "High latency detected"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"storage-backends",children:"Storage Backends"}),"\n",(0,r.jsx)(n.h3,{id:"influxdb-for-time-series-metrics",children:"InfluxDB for Time-Series Metrics"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'storage:\n  runtime:\n    type: "influxdb"\n    addr: "http://influxdb:8086"\n    token: "${INFLUX_TOKEN}"\n    org: "${INFLUX_ORG}"\n    bucket: "${INFLUX_BUCKET}"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"redis-for-caching",children:"Redis for Caching"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'storage:\n  runtime:\n    type: "redis"\n    addr: "localhost:6379"\n    password: "${REDIS_PASSWORD}"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor key metrics"}),": Request rate, error rate, latency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Set up alerts"}),": For high error rates, latency spikes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use structured logging"}),": For easier parsing and analysis"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement health checks"}),": In load balancers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Archive old metrics"}),": To control storage costs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor costs"}),": Track token usage per provider/key"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);